$(document).ready(function(){$("#tabelRiwayat").DataTable({scrollX:!0,language:{lengthMenu:"Tampilkan _MENU_ data per halaman",zeroRecords:"Tidak ada data yang ditemukan",info:"Menampilkan _PAGE_ dari _PAGES_ halaman",infoEmpty:"Tidak ada data tersedia",infoFiltered:"(disaring dari _MAX_ total data)",search:'<i class="bi bi-search fs-5"></i>',paginate:{first:'<i class="bi bi-skip-start"></i>',last:'<i class="bi bi-skip-end"></i>',next:'<i class="bi bi-chevron-right"></i>',previous:'<i class="bi bi-chevron-left"></i>'}}}),$("#detailModal").on("hide.bs.modal",function(i){$("#tabelDetail").DataTable().destroy()}),$("#detailModal").on("show.bs.modal",function(i){const r=$(i.relatedTarget).data("id");fetch(`${window.location.origin}/detail-riwayat/${r}`).then(a=>a.json()).then(a=>{$("#tanggal").text(new Date(a.created_at).toLocaleString("ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"})+" - "+new Date(a.created_at).toLocaleTimeString("ID",{hour:"numeric",minute:"numeric",second:"numeric"})),$("#bahasa").text(a.bahasa.indonesia),$("#benar").text(a.jumlah_benar),$("#kategori").text(a.kategori.indonesia),$("#kata").text(a.jumlah_kata),$("#kesulitan").text(a.tingkat_kesulitan.tingkat_kesulitan),$("#waktu").text(c(a.created_at,a.updated_at));const e=$("#tabelDetailBody");e.empty(),JSON.parse(a.list).forEach(t=>{const n=`<tr class="align-middle">
                        <td class="text-nowrap">${t.kata}</td>
                        <td class="text-nowrap">${t.cara_baca}</td>
                        <td class="text-nowrap">${t.terjemahan}</td>
                        <td class="text-center">${t.percobaan}</td>
                        <td class="text-center">${Math.round(t.durasi)}</td>
                        <td class="text-center">${t.benar?'<i class="bi bi-check text-success"></i>':'<i class="bi bi-x text-danger"></i>'}</td>
                    </tr>`;e.append(n)}),$("#tabelDetail").DataTable({language:{lengthMenu:"Tampilkan _MENU_ data per halaman",zeroRecords:"Tidak ada data yang ditemukan",info:"Menampilkan _PAGE_ dari _PAGES_ halaman",infoEmpty:"Tidak ada data tersedia",infoFiltered:"(disaring dari _MAX_ total data)",search:'<i class="bi bi-search fs-5"></i>',paginate:{first:'<i class="bi bi-skip-start"></i>',last:'<i class="bi bi-skip-end"></i>',next:'<i class="bi bi-chevron-right"></i>',previous:'<i class="bi bi-chevron-left"></i>'}}}).draw()}).catch(a=>console.error("Error fetching latihan data:",a))});function c(i,o){const r=new Date(i),e=(new Date(o)-r)/1e3,t=Math.floor(e/3600),n=Math.floor(e%3600/60),l=Math.floor(e%60);let s="";return t>0&&(s+=`${t} jam `),n>0&&(s+=`${n} menit `),l>0&&(s+=`${l} detik`),s.trim()}});
